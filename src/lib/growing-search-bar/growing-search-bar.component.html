<div class="opal-fx-row opal-fx-align-center opal-w-full">
  <div class="opal-fx-row opal-fx-align-center opal-fx-g-1 opal-fx-s-0">
    <ng-content *ngIf="!isOpen">
    </ng-content>
    <ng-container *ngIf="!hideSearch">
      <button
        *ngIf="mode === 'search-button' && !isOpen"
        aria-label="Search"
        class="opal-ml-auto"
        mat-icon-button
        (click)="changeState()">
        <mat-icon class="opal-s-4 opal-text-grey-400">search</mat-icon>
      </button>

      <ngx-t3-search-bar
        *ngIf="isOpen || mode === 'preview-search'"
        class="opal-ml-auto opal-w-full"
        shape="squared"
        [ngClass]="{
          'preview-search-bar': mode === 'preview-search' && !isOpen,
          'width-transition': isOpen
        }"
        [placeholder]="previewPlaceHolder === undefined ? placeholder : previewPlaceHolder"
        [persistClose]="isOpen"
        [query]="query"
        (queryChange)="queryChange.emit($event)"
        (click)="!isOpen && changeState()"
        (clearQuery)="changeState()">
      </ngx-t3-search-bar>
    </ng-container>
  </div>
</div>
