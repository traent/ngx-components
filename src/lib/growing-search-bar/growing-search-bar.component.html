<div class="tw-flex tw-flex-row tw-items-center tw-w-full">
  <div class="tw-flex tw-flex-row tw-items-center tw-grow tw-shrink-0">
    <ng-content *ngIf="!isOpen">
    </ng-content>
    <ng-container *ngIf="!hideSearch">
      <button
        *ngIf="mode === 'search-button' && !isOpen"
        aria-label="Search"
        class="tw-ml-auto"
        mat-icon-button
        (click)="changeState()">
        <mat-icon class="tw-w-4 tw-h-4 tw-text-neutral-400">search</mat-icon>
      </button>

      <ngx-t3-search-bar
        *ngIf="isOpen || mode === 'preview-search'"
        class="tw-ml-auto tw-w-full"
        shape="squared"
        [ngClass]="{
          'preview-search-bar': mode === 'preview-search' && !isOpen,
          'width-transition': isOpen
        }"
        [placeholder]="previewPlaceHolder === undefined ? placeholder : previewPlaceHolder"
        [persistClose]="isOpen"
        [query]="query"
        (queryChange)="queryChange.emit($event)"
        (click)="!isOpen && changeState()"
        (clearQuery)="changeState()">
      </ngx-t3-search-bar>
    </ng-container>
  </div>
</div>
